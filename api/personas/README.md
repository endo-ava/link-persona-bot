# ペルソナ定義

このディレクトリには、Discord Botで使用するペルソナの定義ファイル（YAML形式）が格納されています。

## ペルソナ一覧

| ペルソナID | 名前 | アイコン | 説明 |
|-----------|------|---------|------|
| `psychologist` | 心理カウンセラー | 💚 | 人間の心理と行動パターンを優しく解き明かす、共感力の高いカウンセラー |
| `professor` | 大学教授 | 👨‍🏫 | 学術的観点から物事を解説する、少し権威的な知識人 |
| `sarcastic` | 毒舌ジャーナリスト | 🔥 | 皮肉と冷笑で本質を突く、ベテランジャーナリスト |
| `artist` | アート系大学生 | 🎨 | 感性と直感で世界を捉える、自由奔放な美大生クリエイター |
| `entrepreneur` | 熱血起業家 | 🚀 | すべてをビジネスチャンスと捉える超ポジティブな破壊的イノベーター |
| `idol` | 地下アイドル | 🎤 | 明るく元気いっぱいで、ファンを大切にする応援型エンタメ配信者 |
| `otaku` | サブカルオタク | 🎮 | アニメ・漫画・ゲームの要素で世界を解釈する熱狂的オタク |
| `influencer` | Z世代インフルエンサー | 📱 | SNSとトレンドに敏感な、カジュアルで親しみやすい配信者 |

## YAMLファイル形式

### 基本構造

```yaml
name: "ペルソナ名"
icon: "😊"  # Discord表示用の絵文字
color: 0x3498db  # Discord Embedカラー（16進数）
description: "ペルソナの短い説明文"

system_prompt: |
  あなたは「ペルソナ名」です。

  キャラクター設定:
  - 性別:
  - 年齢:
  - 職業:
  - 性格:
  - 特徴:

  応答のルール:
  - （トーン・スタイルの指示）
  - （専門用語の使い方）
  - （口調の特徴）

examples:
  - input: "質問例1"
    output: "回答例1"

  - input: "質問例2"
    output: "回答例2"
```

### フィールド説明

#### `name` (必須)
- ペルソナの表示名
- 日本語OK
- 例: `"心理カウンセラー"`, `"毒舌ジャーナリスト"`

#### `icon` (必須)
- Discord表示用の絵文字1文字
- Unicode絵文字を使用
- 例: `"💚"`, `"🔥"`, `"🎨"`

#### `color` (必須)
- Discord Embedの色（16進数）
- 形式: `0xRRGGBB`
- 例: `0x20b2aa` (ライトグリーン), `0xff4500` (オレンジレッド)

#### `description` (必須)
- ペルソナの短い説明文
- 1行、50-100文字程度
- ペルソナ選択UIで表示される

#### `system_prompt` (必須)
- LLMに送信されるシステムプロンプト
- **重要**: ペルソナの人格・口調・トーンのみを記述
- **禁止**: 文字数指定、タスク指示、技術的制約

**含めるべき内容:**
- キャラクター設定（年齢、性別、職業、性格、特徴）
- 応答のルール（語り口、トーン、スタイル、専門用語）

**含めてはいけない内容:**
- ❌ 文字数指定（例: 「100-200字で」）
- ❌ タスク指示（例: 「要約して」「分析して」）
- ❌ 技術的制約（例: 「タイムアウトは30秒」）

#### `examples` (推奨)
- ペルソナの応答例
- 2-5個程度
- inputとoutputのペアで記述
- LLMへのfew-shot examplesとして使用される

## 設計原則

### 単一責任の原則

ペルソナYAMLは**人格・口調・キャラクター**のみを定義します。

```
✅ 含めるべきもの:
- キャラクター設定（年齢、性別、職業、性格）
- 語り口・トーン（「温かく」「皮肉を込めて」など）
- 専門用語・口癖
- 応答のスタイル

❌ 含めてはいけないもの:
- 文字数指定 → api/config.py で管理
- タスク指示 → api/services/*.py で管理
- 技術的制約 → api/config.py で管理
```

## ベストプラクティス

### 1. 具体的なキャラクター設定

**悪い例:**
```yaml
キャラクター設定:
  - 専門家です
```

**良い例:**
```yaml
キャラクター設定:
  - 性別: 女性、年齢: 30代後半
  - 15年以上の臨床経験を持つ心理の専門家
  - 認知バイアスや防衛機制など心理学の知識が豊富
  - 共感的で温かいが、人間行動を鋭く分析する
```

### 2. 明確な応答ルール

**悪い例:**
```yaml
応答のルール:
  - 面白く語ること
```

**良い例:**
```yaml
応答のルール:
  - アニメ・漫画・ゲームの要素に例えて語ること
  - 「これはアツい！」「神展開」などのオタク用語を使うこと
  - テンション高めの語り口で
  - ネットスラングを適度に使うこと
```

### 3. 豊富なexamples

- 最低2個、推奨3-5個
- 様々なトピック（技術、社会、経済など）
- ペルソナの特徴が明確に表れている回答

### 4. 一貫性のある設定

- キャラクター設定と応答ルールが一致していること
- examplesが応答ルールに従っていること
- 全体的にペルソナの個性が一貫していること

## 参考資料

- [プロンプト設計ガイドライン](../../docs/04.prompt-design.md) - プロンプト設計の原則
- [プロジェクト要件定義](../../docs/01.project.md) - 機能要件
- [API層アーキテクチャ](../README.md) - API層の全体構造
